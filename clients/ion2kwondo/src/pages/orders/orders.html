<!--
  Generated template for the OrdersPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Ordini prenotazioni</ion-title>
  </ion-navbar>
  <ion-item>
      <ion-label>Stato</ion-label>
      <ion-select [(ngModel)]="statusfilter" (ionChange)="changeFilter($event)">
        <ion-option value="inoltrato">Inoltrati</ion-option>
        <ion-option value="completato">Completati</ion-option>
      </ion-select>
    </ion-item>

</ion-header>


<ion-content spadding class="ion-content">
    <div *ngIf="loading" style="width: 100%; text-align: center">
        <ion-spinner name="ios"></ion-spinner>
      </div>

  <ion-list *ngFor="let o of displayedorders">
    <ion-card >
      <ion-card-content>
        <section (tap)="viewOrder(o)">
          <div class="id">ID:&nbsp;{{o.id}}</div>
      <div class="orderid">DATA: &nbsp;{{getDataOrdine(o)}}</div>
      <div class="frm">DA:&nbsp;{{o.nick}} ({{o.email}})</div>
      <div class="totalprice">TOTALE:&nbsp;{{getTotalPrice(o)}}€</div>
      <div class="status">STATO:&nbsp;{{o.stato}}</div>
    </section>
      
      <section *ngIf="vieworder==o.id">
        <hr>
        <div *ngFor="let c of o.cart">
        
              <ion-row>
                <ion-col>
                    {{c.product.nome}}
                </ion-col>
              </ion-row>
              <ion-row>
                
        
                  
                <ion-col col-4>
                  Qta: {{c.qty}}
                </ion-col>
                <ion-col col-4>
                  {{c.product.price}}€
                </ion-col>
                <ion-col col-4>
                  {{getTotaleRiga(c)}}€
                </ion-col>
              </ion-row>
             
              


         
        </div>
        <hr>
        <ion-row>
            <ion-col col-8>
              Totale ordine
            </ion-col>
            <ion-col col-4>
              <b>{{getTotalPrice(o)}}€</b>
            </ion-col>
          </ion-row>
          <hr>
          <ion-row>
            <ion-col>
                <button  ion-button small (tap)="deleteOrder(o)">Elimina ordine</button>
            
            </ion-col>
            <ion-col>
                <button *ngIf="o.stato=='inoltrato'" ion-button small (tap)="completeOrder(o)">Completa ordine</button>  
            </ion-col>
          </ion-row>
    
      </section>
    </ion-card-content>
  </ion-card>

  </ion-list>

</ion-content>
