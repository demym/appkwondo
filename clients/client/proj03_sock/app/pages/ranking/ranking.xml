<Page xmlns="http://schemas.nativescript.org/tns.xsd" 
 xmlns:PullRefresh="nativescript-pulltorefresh"
loaded="pageLoaded">
   <ActionBar title="Ranking" cssClass="actionbar">
   <NavigationButton android.systemIcon="ic_menu_back" tap="onNavBtnTap"/>
    <ActionBar.actionItems>
	    
        <!--<ActionItem text="Gare"  ios.position="left" android.position="left" />
        <ActionItem text="right" ios.position="right"/>-->
        <ActionItem text="Refresh"   ios.position="right"  android.position="popup" tap="fetchRanking"/>
      </ActionBar.actionItems>
	</ActionBar> 
    <StackLayout>
    

 <GridLayout rows="40,*,50">
 <Label row="0"  text="{{ 'Ordinamento: '+sortfield }}" textWrap="true" class="lvitem" /> 
 
  <PullRefresh:PullToRefresh row="1" refresh="fetchRanking" refreshing="{{loading}}">
  <ListView  items="{{ranking}}" id="lv1" itemTap="listViewItemTap">
	 <ListView.itemTemplate>
   <GridLayout rows="40,30" columns="50,*,50">
       <Label row="0" col="0" text="{{ doc.position }}" textWrap="true" class="lvitem" style="font-weight: bold;" /> 
       <Label row="0" col="1" text="{{ doc.cognome+' '+doc.nome }}" textWrap="true" class="lvitem" />
       <Label row="0" col="2" text="{{ doc.ranking_tkdr }}" textWrap="true" class="lvitem" /> 
       
       <Label row="1" col="1" colSpan="2" visibility="{{ doc.showmedals ? 'visible' : 'visible'}}" text="{{ 'ORI: '+doc.ori+' ARG: '+doc.argenti+' BRO: '+doc.bronzi+'  gare: '+doc.garedisputate+'   match: '+doc.matchdisputati}}" />
    </GridLayout>     
    </ListView.itemTemplate>
	</ListView>
    </PullRefresh:PullToRefresh>
    
	 <Button row="2" text="&#xf162;     Ordina" class="font-awesome" tap="tapOrdina" style="width: 100%;"  />
</GridLayout>

</StackLayout>

</Page>
